# 작업 규칙 (Codex Agent Guide)

## 목적

- GitHub Issue 번호(#N)를 입력받아 해당 이슈를 읽고, 해결에 필요한 코드 변경 → 커밋 → PR 생성까지 진행한다.

## 이슈 확인

- 반드시 아래 명령으로 이슈 본문과 코멘트를 확인한다.
  - gh issue view {N} --comments

## 작업 계획

- 이슈를 읽은 뒤 아래를 포함한 "작업 계획"을 먼저 작성한다.
  - 변경 범위(어떤 파일/모듈)
  - 접근 방식(어떤 로직/구조)
  - 테스트/검증 방법
- 계획이 불명확하면 TODO/확인 필요를 남기고, 과도한 추정을 하지 않는다.

## 타입 결정 (중요)

이슈 내용을 읽고 아래 중 하나를 선택해 branch/commit/PR에 반영한다.

- **fix**: 버그 수정, 오류/예외 처리, 잘못된 동작 수정
- **feat**: 사용자 기능 추가/변경, 신규 플로우
- **refactor**: 동작 변경 없이 구조 개선, 중복 제거, 가독성 개선
- **chore**: 빌드/스크립트/환경설정/의존성/툴링 정리
- **docs**: 문서/README/주석 중심 변경
- **test**: 테스트 추가/수정 중심 변경
- 판단이 애매하면 **fix**를 우선으로 하되, PR 본문에 근거를 간단히 적는다.

## 브랜치 규칙

- 브랜치명은 아래 형식으로 생성한다.
  - {type}/issue-{N}
  - 예: fix/issue-57, refactor/issue-12

## 커밋 규칙 (Conventional Commits - 한국어)

- 커밋 메시지는 반드시 한국어로 작성한다.
- 형식은 Conventional Commits를 따른다.

형식:
{type}: <한국어 요약> (refs #{N})

예시:
Fix: 인증 상태가 갱신되지 않는 문제 수정 (refs #57)
Feat: 보호된 라우트 접근 제어 기능 추가 (refs #12)
Refactor: 라우팅 가드 로직 단순화 (refs #8)
Chore: ESLint 설정 업데이트 (refs #21)
Docs: README 인증 흐름 설명 추가 (refs #5)
Test: 인증 훅 단위 테스트 추가 (refs #9)

## 실행/검증

- 가능하면 아래를 실행한다(프로젝트에 없으면 건너뛰고 이유를 기록).
  - npm run lint
  - npm run test
  - npm run build

## PR 생성

- PR 제목은 아래 형식으로 한국어로 작성한다.
  - {type}: <한국어 요약> (#N)

예시:
fix: 인증 상태 동기화 오류 수정 (#57)
refactor: 레이아웃 컴포넌트 구조 개선 (#14)

- PR 본문에는 다음을 포함한다:
  - 변경 요약 (한국어)
  - 주요 변경점
  - 검증 방법
  - Closes #N

## 안전장치

- 변경은 이슈 범위 내 최소 단위로 유지한다.
- 큰 리팩토링/설계 변경이 필요하면 먼저 PR을 쪼개거나, 이슈에 코멘트로 합의 필요 사항을 남긴다.

## PR 본문 작성 규칙 (필수)

PR을 생성할 때는 반드시 아래 템플릿을 사용하여 본문을 작성한다.

### 📝 작업 개요

- 이 PR에서 어떤 작업을 수행했는지 요약한다.

### 🔧 주요 변경 사항

- 변경된 기능 또는 로직을 항목별로 정리한다.
- 수정된 파일 또는 컴포넌트를 명시한다.

### 🎯 변경 목적

- 이 변경이 왜 필요한지 설명한다.
- 해결하려는 문제 또는 개선 사항을 명시한다.

### 🧪 검증 방법

- 실행한 테스트 또는 검증 방법을 작성한다.
- 예: npm run build / npm run lint 등

### 📌 참고 사항

- 추가로 확인이 필요한 사항이 있다면 작성한다.

---

Closes #{N}

## 브랜치 복귀 규칙 (필수)

- 작업 시작 시 현재 기준 브랜치(예: main, develop)를 확인하고 기억한다.
  - git rev-parse --abbrev-ref HEAD

- 작업 브랜치({type}/issue-{N})에서 모든 변경 및 PR 생성이 완료되면,
  반드시 아래 순서로 원래 브랜치로 복귀한다:
  1. git checkout <기준 브랜치>
  2. git pull

- 작업 브랜치에는 머무르지 않는다.

- 브랜치 복귀 전, 변경 사항이 모두 커밋되었는지 확인한다.
  - git status 가 clean 인지 확인

- 이 스크립트 사용 시, PR 생성은 스크립트가 수행하므로 에이전트는 PR을 직접 생성하지 않는다.
